#pragma once

#define WEATHER_ICON_SIZE 16 /* px */

enum WeatherIcon {
    WEATHER_CLOUD = 0,
    WEATHER_CLOUD_MOON,
    WEATHER_CLOUD_SUN,
    WEATHER_CLOUD_WIND,
    WEATHER_CLOUD_WIND_MOON,
    WEATHER_CLOUD_WIND_SUN,
    WEATHER_CLOUDS,
    WEATHER_LIGHTNING,
    WEATHER_MOON,
    WEATHER_RAIN0,
    WEATHER_RAIN0_SUN,
    WEATHER_RAIN1,
    WEATHER_RAIN1_MOON,
    WEATHER_RAIN1_SUN,
    WEATHER_RAIN2,
    WEATHER_RAIN_LIGHTNING,
    WEATHER_RAIN_SNOW,
    WEATHER_SNOW,
    WEATHER_SNOW_MOON,
    WEATHER_SNOW_SUN,
    WEATHER_SUN,
    WEATHER_WIND,
    WEATHER_ICON_COUNT
};

// 700 bytes
const uint8_t WEATHER_ICONS[WEATHER_ICON_COUNT][WEATHER_ICON_SIZE*WEATHER_ICON_SIZE/8] PROGMEM = {
    [WEATHER_CLOUD] = {
        0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xfc, 0x3f, 0xfb, 0xdf, 0xfb, 0xef, 0xe7, 0xf7,
        0xdf, 0xfb, 0xbf, 0xfb, 0xbf, 0xfb, 0xdf, 0xf7, 0xe0, 0x0f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    },
    [WEATHER_CLOUD_MOON] = {
        0xff, 0xff, 0xff, 0xe3, 0xff, 0xdb, 0xff, 0xb7, 0xfc, 0x37, 0xfb, 0xd8, 0xfb, 0xee, 0xe7, 0xf5,
        0xdf, 0xfb, 0xbf, 0xfb, 0xbf, 0xfb, 0xdf, 0xf7, 0xe0, 0x0f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    },
    [WEATHER_CLOUD_SUN] = {
        0xff, 0xff, 0xff, 0xef, 0xff, 0x45, 0xff, 0xbb, 0xfc, 0x3d, 0xfb, 0xdc, 0xfb, 0xed, 0xe7, 0xf3,
        0xdf, 0xfb, 0xbf, 0xfb, 0xbf, 0xfb, 0xdf, 0xf7, 0xe0, 0x0f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    },
    [WEATHER_CLOUD_WIND] = {
        0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xfc, 0x3f, 0xfb, 0xdf, 0xfb, 0xef, 0xe7, 0xf7,
        0xdf, 0xfb, 0xff, 0xfb, 0x80, 0x1b, 0xff, 0xf7, 0x00, 0x2f, 0xff, 0xff, 0xc0, 0x0f, 0xff, 0xff,
    },
    [WEATHER_CLOUD_WIND_MOON] = {
        0xff, 0xff, 0xff, 0xe3, 0xff, 0xdb, 0xff, 0xb7, 0xfc, 0x37, 0xfb, 0xd8, 0xfb, 0xee, 0xe7, 0xf5,
        0xdf, 0xfb, 0xff, 0xfb, 0x80, 0x1b, 0xff, 0xf7, 0x00, 0x2f, 0xff, 0xff, 0xc0, 0x0f, 0xff, 0xff,
    },
    [WEATHER_CLOUD_WIND_SUN] = {
        0xff, 0xff, 0xff, 0xef, 0xff, 0x45, 0xff, 0xbb, 0xfc, 0x3d, 0xfb, 0xdc, 0xfb, 0xed, 0xe7, 0xf3,
        0xdf, 0xfb, 0xff, 0xfb, 0x80, 0x1b, 0xff, 0xf7, 0x00, 0x2f, 0xff, 0xff, 0xc0, 0x0f, 0xff, 0xff,
    },
    [WEATHER_CLOUDS] = {
        0xff, 0xff, 0xff, 0xff, 0xff, 0x0f, 0xfe, 0xf7, 0xfc, 0x3b, 0xfb, 0xdd, 0xfb, 0xee, 0xe7, 0xf6,
        0xdf, 0xfa, 0xbf, 0xf9, 0xbf, 0xfb, 0xdf, 0xf7, 0xe0, 0x0f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    },
    [WEATHER_LIGHTNING] = {
        0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xfc, 0x3f, 0xfb, 0xdf, 0xfb, 0xef, 0xe7, 0xf7,
        0xdf, 0xfb, 0xbf, 0xfb, 0xbe, 0x3b, 0xde, 0x77, 0xe2, 0x4f, 0xff, 0x7f, 0xfe, 0xff, 0xfe, 0xff,
    },
    [WEATHER_MOON] = {
        0xff, 0xff, 0xf8, 0xff, 0xf6, 0xff, 0xed, 0xff, 0xdb, 0xff, 0xbb, 0xff, 0xbb, 0xff, 0xbb, 0xff,
        0xbb, 0xf9, 0xbd, 0xf5, 0xbe, 0x0d, 0xdf, 0xfb, 0xef, 0xf7, 0xf7, 0xef, 0xf8, 0x1f, 0xff, 0xff,
    },
    [WEATHER_RAIN0] = {
        0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xfc, 0x3f, 0xfb, 0xdf, 0xfb, 0xef, 0xe7, 0xf7,
        0xdf, 0xfb, 0xbf, 0xfb, 0xbd, 0x7b, 0xdd, 0x77, 0xef, 0xcf, 0xfa, 0xff, 0xfe, 0xff, 0xff, 0xff,
    },
    [WEATHER_RAIN0_SUN] = {
        0xff, 0xff, 0xff, 0xef, 0xff, 0x45, 0xff, 0xbb, 0xfc, 0x3d, 0xfb, 0xdc, 0xfb, 0xed, 0xe7, 0xf3,
        0xdf, 0xfb, 0xbf, 0xfb, 0xbd, 0x7b, 0xdd, 0x77, 0xef, 0xcf, 0xfa, 0xff, 0xfe, 0xff, 0xff, 0xff,
    },
    [WEATHER_RAIN1] = {
        0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xfc, 0x3f, 0xfb, 0xdf, 0xfb, 0xef, 0xe7, 0xf7,
        0xdf, 0xfb, 0xbf, 0xfb, 0xbd, 0x7b, 0xdd, 0x77, 0xeb, 0x4f, 0xfa, 0xff, 0xfe, 0xff, 0xff, 0xff,
    },
    [WEATHER_RAIN1_MOON] = {
        0xff, 0xff, 0xff, 0xe3, 0xff, 0xdb, 0xff, 0xb7, 0xfc, 0x37, 0xfb, 0xd8, 0xfb, 0xee, 0xe7, 0xf5,
        0xdf, 0xfb, 0xbf, 0xfb, 0xbd, 0x7b, 0xdd, 0x77, 0xeb, 0x4f, 0xfa, 0xff, 0xfe, 0xff, 0xff, 0xff,
    },
    [WEATHER_RAIN1_SUN] = {
        0xff, 0xff, 0xff, 0xef, 0xff, 0x45, 0xff, 0xbb, 0xfc, 0x3d, 0xfb, 0xdc, 0xfb, 0xed, 0xe7, 0xf3,
        0xdf, 0xfb, 0xbf, 0xfb, 0xbd, 0x7b, 0xdd, 0x77, 0xeb, 0x4f, 0xfa, 0xff, 0xfe, 0xff, 0xff, 0xff,
    },
    [WEATHER_RAIN2] = {
        0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xfc, 0x3f, 0xfb, 0xdf, 0xfb, 0xef, 0xe7, 0xf7,
        0xdf, 0xfb, 0xbf, 0xfb, 0xba, 0xab, 0xd6, 0xaf, 0xf5, 0xaf, 0xf5, 0x6f, 0xfd, 0x7f, 0xff, 0xff,
    },
    [WEATHER_RAIN_LIGHTNING] = {
        0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xfc, 0x3f, 0xfb, 0xdf, 0xfb, 0xef, 0xe7, 0xf7,
        0xdf, 0xfb, 0xbf, 0xfb, 0xba, 0x8b, 0xd6, 0x9f, 0xf5, 0x9f, 0xf5, 0xdf, 0xfd, 0xbf, 0xff, 0xbf,
    },
    [WEATHER_RAIN_SNOW] = {
        0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xfc, 0x3f, 0xfb, 0xdf, 0xfb, 0xef, 0xe7, 0xf7,
        0xdf, 0xfb, 0xbf, 0xfb, 0xba, 0xdb, 0xd6, 0xaf, 0xf5, 0xdf, 0xf5, 0xbf, 0xfd, 0x5f, 0xff, 0xbf,
    },
    [WEATHER_SNOW] = {
        0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xfc, 0x3f, 0xfb, 0xdf, 0xfb, 0xef, 0xe7, 0xf7,
        0xdf, 0xfb, 0xbf, 0xfb, 0xbe, 0xfb, 0xdd, 0x77, 0xf6, 0xdf, 0xeb, 0xaf, 0xf7, 0xdf, 0xff, 0xff,
    },
    [WEATHER_SNOW_MOON] = {
        0xff, 0xff, 0xff, 0xe3, 0xff, 0xdb, 0xff, 0xb7, 0xfc, 0x37, 0xfb, 0xd8, 0xfb, 0xee, 0xe7, 0xf5,
        0xdf, 0xfb, 0xbf, 0xfb, 0xbe, 0xfb, 0xdd, 0x77, 0xf6, 0xdf, 0xeb, 0xaf, 0xf7, 0xdf, 0xff, 0xff,
    },
    [WEATHER_SNOW_SUN] = {
        0xff, 0xff, 0xff, 0xef, 0xff, 0x45, 0xff, 0xbb, 0xfc, 0x3d, 0xfb, 0xdc, 0xfb, 0xed, 0xe7, 0xf3,
        0xdf, 0xfb, 0xbf, 0xfb, 0xbe, 0xfb, 0xdd, 0x77, 0xf6, 0xdf, 0xeb, 0xaf, 0xf7, 0xdf, 0xff, 0xff,
    },
    [WEATHER_SUN] = {
        0xff, 0xff, 0xff, 0x7f, 0xff, 0x7f, 0xef, 0x7b, 0xf7, 0xf7, 0xfe, 0x3f, 0xfd, 0xdf, 0xfb, 0xef,
        0x8b, 0xe8, 0xfb, 0xef, 0xfd, 0xdf, 0xfe, 0x3f, 0xf7, 0xf7, 0xef, 0x7b, 0xff, 0x7f, 0xff, 0x7f,
    },
    [WEATHER_WIND] = {
        0xff, 0xff, 0xff, 0xff, 0xff, 0xdf, 0xff, 0xef, 0xff, 0xeb, 0xc0, 0x1d, 0xff, 0xfd, 0x80, 0x03,
        0xff, 0xff, 0xc0, 0x0f, 0xff, 0xf7, 0xff, 0xf7, 0xff, 0xef, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    },
};

static enum WeatherIcon weather_icon_from_wmo_code(int wmo_code) {
    switch (wmo_code) {
    case 0: case 1: return WEATHER_SUN;
    case 2: return WEATHER_CLOUD_SUN;
    case 3: return WEATHER_CLOUD;

    case 61: return WEATHER_RAIN0;
    case 63: return WEATHER_RAIN1;
    case 65: return WEATHER_RAIN2;
    case 66: case 67: return WEATHER_RAIN_SNOW;

    case 71: case 73: case 75: case 85: case 86: return WEATHER_SNOW;

    case 80: return WEATHER_RAIN0_SUN;
    case 81: return WEATHER_RAIN1_SUN;
    case 82: return WEATHER_RAIN2;

    case 95: case 96: case 99: return WEATHER_RAIN_LIGHTNING;

    default: return WEATHER_CLOUD;
    }
}
